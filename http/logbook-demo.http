### ============================================================
### Logbook: automatic HTTP request/response masking
### ============================================================
###
### Start: ./gradlew bootRun
###
### Logbook intercepts HTTP traffic and logs masked request/response
### at TRACE level (org.zalando.logbook). No code needed in controller.
### ============================================================


### LOGIN
### Logbook request:  "password":"***REDACTED***", "email":"***@example.com"
### Logbook response: "token":"***REDACTED***"

POST http://{{host}}/api/logbook/login
Content-Type: application/json

{
  "username": "john.doe",
  "password": "SuperSecret123",
  "email": "john.doe@example.com"
}

### PAYMENT
### Logbook request: "creditCardNumber" masked, "cvv":"***REDACTED***", "email":"***@example.com"

POST http://{{host}}/api/logbook/payment
Content-Type: application/json

{
  "amount": 99.99,
  "currency": "USD",
  "creditCardNumber": "4111111111111111",
  "cvv": "123",
  "cardholderName": "John Doe",
  "email": "john.doe@example.com"
}

### PROFILE
### Logbook request: "ssn" masked, "apiKey" masked, "email":"***@example.com", "phone":"***7890"

POST http://{{host}}/api/logbook/profile
Content-Type: application/json

{
  "name": "Jane Doe",
  "email": "jane.doe@example.com",
  "phone": "+1234567890",
  "ssn": "123-45-6789",
  "apiKey": "sk-abc123secret456"
}

### CUSTOM TOKENS
### Logbook request: "myCustomeToken1":"XXX", "mycustomtoken2":"XXX"
### "service" and "payload" stay visible (not in obfuscate list)

POST http://{{host}}/api/logbook/custom-tokens
Content-Type: application/json

{
  "service": "payment-gateway",
  "myCustomeToken1": "abc-secret-token-value-123",
  "mycustomtoken2": "xyz-another-secret-456",
  "payload": "some-non-sensitive-data"
}

### PROTECTED with Bearer JWT
### Logbook: Authorization header -> XXX

GET http://{{host}}/api/logbook/protected
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIn0.dozjgNryP4J3jVmNHl0w5N_XgL0n3I9PlFUP0THsR8U

### PROTECTED with X-API-Key
### Logbook: X-API-Key header -> XXX

GET http://{{host}}/api/logbook/protected
X-API-Key: my-super-secret-api-key-12345

